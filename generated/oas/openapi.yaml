openapi: 3.1.0
info:
  title: ヰ世界のテラリウム API
  version: 0.0.0
tags:
  - name: Authenticate
  - name: Creator
  - name: Performer
  - name: SongType
  - name: Song
paths:
  /auth/login:
    post:
      operationId: AuthenticateService_login
      description: 認証API
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          headers:
            Set-Cookie:
              required: true
              schema:
                type: string
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access is unauthorized.
        '422':
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Authenticate
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
  /creators:
    get:
      operationId: CreatorService_listCreators
      description: クリエイター一覧取得API
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreatorListResponse'
        '401':
          description: Access is unauthorized.
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Creator
      security:
        - CookieAuth: []
    post:
      operationId: CreatorService_createCreator
      description: クリエイター作成API
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreatorCreateResponse'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access is unauthorized.
        '422':
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Creator
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatorCreateRequest'
      security:
        - CookieAuth: []
  /creators/{creatorId}:
    get:
      operationId: CreatorService_getCreator
      description: クリエイター取得API
      parameters:
        - name: creatorId
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/uuid'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreatorGetResponse'
        '401':
          description: Access is unauthorized.
        '404':
          description: The server cannot find the requested resource.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Creator
      security:
        - CookieAuth: []
    put:
      operationId: CreatorService_updateCreator
      description: クリエイター更新API
      parameters:
        - name: creatorId
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/uuid'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreatorUpdateResponse'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access is unauthorized.
        '404':
          description: The server cannot find the requested resource.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Creator
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatorUpdateRequest'
      security:
        - CookieAuth: []
    delete:
      operationId: CreatorService_deleteCreator
      description: クリエイター削除API
      parameters:
        - name: creatorId
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/uuid'
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access is unauthorized.
        '422':
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Creator
      security:
        - CookieAuth: []
  /performers:
    get:
      operationId: PerformerService_listPerformers
      description: 共演者一覧取得API
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PerformerListResponse'
        '401':
          description: Access is unauthorized.
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Performer
      security:
        - CookieAuth: []
    post:
      operationId: PerformerService_createPerformer
      description: 共演者作成API
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PerformerCreateResponse'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access is unauthorized.
        '422':
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Performer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PerformerCreateRequest'
      security:
        - CookieAuth: []
  /performers/{performerId}:
    get:
      operationId: PerformerService_getPerformer
      description: 共演者取得API
      parameters:
        - name: performerId
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/uuid'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PerformerGetResponse'
        '401':
          description: Access is unauthorized.
        '404':
          description: The server cannot find the requested resource.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Performer
      security:
        - CookieAuth: []
    put:
      operationId: PerformerService_updatePerformer
      description: 共演者更新API
      parameters:
        - name: performerId
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/uuid'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PerformerUpdateResponse'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access is unauthorized.
        '404':
          description: The server cannot find the requested resource.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Performer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PerformerUpdateRequest'
      security:
        - CookieAuth: []
    delete:
      operationId: PerformerService_deletePerformer
      description: 共演者削除API
      parameters:
        - name: performerId
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/uuid'
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
        '401':
          description: Access is unauthorized.
        '422':
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Performer
      security:
        - CookieAuth: []
  /song-types:
    get:
      operationId: SongTypeService_listSongTypes
      description: 楽曲種別一覧取得API
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SongTypeListResponse'
        '401':
          description: Access is unauthorized.
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - SongType
      security:
        - CookieAuth: []
  /songs:
    get:
      operationId: SongService_listSongs
      description: 楽曲一覧取得API
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SongListResponse'
        '401':
          description: Access is unauthorized.
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Song
      security:
        - CookieAuth: []
    post:
      operationId: SongService_createSong
      description: 楽曲作成API
      parameters: []
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SongCreateResponse'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access is unauthorized.
        '422':
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Song
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SongCreateRequest'
      security:
        - CookieAuth: []
  /songs/{songId}:
    get:
      operationId: SongService_getSong
      description: 楽曲取得API
      parameters:
        - name: songId
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/uuid'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SongGetResponse'
        '401':
          description: Access is unauthorized.
        '404':
          description: The server cannot find the requested resource.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Song
      security:
        - CookieAuth: []
    put:
      operationId: SongService_updateSong
      description: 楽曲更新API
      parameters:
        - name: songId
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/uuid'
      responses:
        '200':
          description: The request has succeeded.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SongUpdateResponse'
        '400':
          description: The server could not understand the request due to invalid syntax.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Access is unauthorized.
        '404':
          description: The server cannot find the requested resource.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '422':
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Song
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SongUpdateRequest'
      security:
        - CookieAuth: []
    delete:
      operationId: SongService_deleteSong
      description: 楽曲削除API
      parameters:
        - name: songId
          in: path
          required: true
          schema:
            $ref: '#/components/schemas/uuid'
      responses:
        '204':
          description: 'There is no content to send for this request, but the headers may be useful. '
        '401':
          description: Access is unauthorized.
        '422':
          description: Client error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '500':
          description: Server error
        '503':
          description: Service unavailable.
        '504':
          description: Server error
      tags:
        - Song
      security:
        - CookieAuth: []
components:
  schemas:
    Arranger:
      type: object
      allOf:
        - $ref: '#/components/schemas/SongCreator'
      examples:
        - creatorId: a4d01e9d-e593-4bd9-ba83-e9a7dd3887cd
          creatorName: ヰ世界情緒
          orderNo: 1
    Composer:
      type: object
      allOf:
        - $ref: '#/components/schemas/SongCreator'
      examples:
        - creatorId: a4d01e9d-e593-4bd9-ba83-e9a7dd3887cd
          creatorName: ヰ世界情緒
          orderNo: 1
    CookieAuth:
      type: object
      required:
        - type
        - in
        - name
      properties:
        type:
          type: string
          enum:
            - apiKey
          description: API key authentication
        in:
          type: string
          enum:
            - cookie
          description: location of the API key
        name:
          type: string
          enum:
            - access_token
          description: name of the API key
      description: ''
    Creator:
      type: object
      required:
        - creatorId
        - creatorName
      properties:
        creatorId:
          $ref: '#/components/schemas/creatorId'
        creatorName:
          $ref: '#/components/schemas/creatorName'
      examples:
        - creatorId: 0cc5f492-22fe-4f38-b702-8b2375bc0254
          creatorName: ヰ世界情緒
    CreatorCreateRequest:
      type: object
      required:
        - creatorName
      properties:
        creatorName:
          $ref: '#/components/schemas/creatorName'
    CreatorCreateResponse:
      type: object
      required:
        - creator
      properties:
        creator:
          $ref: '#/components/schemas/Creator'
    CreatorGetResponse:
      type: object
      required:
        - creator
      properties:
        creator:
          $ref: '#/components/schemas/Creator'
    CreatorListResponse:
      type: object
      required:
        - creators
      properties:
        creators:
          type: array
          items:
            $ref: '#/components/schemas/Creator'
    CreatorUpdateRequest:
      type: object
      required:
        - creatorName
      properties:
        creatorName:
          $ref: '#/components/schemas/creatorName'
    CreatorUpdateResponse:
      type: object
      required:
        - creator
      properties:
        creator:
          $ref: '#/components/schemas/Creator'
    ErrorResponse:
      type: object
      required:
        - message
      properties:
        message:
          type: string
    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          $ref: '#/components/schemas/email'
        password:
          type: string
          format: password
    Lyricist:
      type: object
      allOf:
        - $ref: '#/components/schemas/SongCreator'
      examples:
        - creatorId: a4d01e9d-e593-4bd9-ba83-e9a7dd3887cd
          creatorName: ヰ世界情緒
          orderNo: 1
    Performer:
      type: object
      required:
        - performerId
        - performerName
        - orderNo
      properties:
        performerId:
          $ref: '#/components/schemas/performerId'
        performerName:
          $ref: '#/components/schemas/performerName'
        orderNo:
          $ref: '#/components/schemas/orderNo'
      examples:
        - performerId: 3cd42c09-ff3c-4cd2-913f-a279c4ea89b4
          performerName: ヰ世界情緒
          orderNo: 1
    PerformerCreateRequest:
      type: object
      required:
        - performerName
      properties:
        performerName:
          $ref: '#/components/schemas/performerName'
    PerformerCreateResponse:
      type: object
      required:
        - performer
      properties:
        performer:
          $ref: '#/components/schemas/Performer'
    PerformerGetResponse:
      type: object
      required:
        - performer
      properties:
        performer:
          $ref: '#/components/schemas/Performer'
    PerformerListResponse:
      type: object
      required:
        - performers
      properties:
        performers:
          type: array
          items:
            $ref: '#/components/schemas/Performer'
    PerformerUpdateRequest:
      type: object
      required:
        - performerName
        - orderNo
      properties:
        performerName:
          $ref: '#/components/schemas/performerName'
        orderNo:
          $ref: '#/components/schemas/orderNo'
    PerformerUpdateResponse:
      type: object
      required:
        - performer
      properties:
        performer:
          $ref: '#/components/schemas/Performer'
    RequestArranger:
      type: object
      required:
        - creatorId
      properties:
        creatorId:
          $ref: '#/components/schemas/creatorId'
      description: The template for picking properties.
    RequestComposer:
      type: object
      required:
        - creatorId
      properties:
        creatorId:
          $ref: '#/components/schemas/creatorId'
      description: The template for picking properties.
    RequestLyricist:
      type: object
      required:
        - creatorId
      properties:
        creatorId:
          $ref: '#/components/schemas/creatorId'
      description: The template for picking properties.
    Song:
      type: object
      required:
        - songId
        - title
        - description
        - songType
        - orderNo
        - arrangers
        - composers
        - lyricists
      properties:
        songId:
          $ref: '#/components/schemas/songId'
        title:
          $ref: '#/components/schemas/title'
        description:
          $ref: '#/components/schemas/description'
        songType:
          $ref: '#/components/schemas/SongType'
        orderNo:
          $ref: '#/components/schemas/orderNo'
        arrangers:
          type: array
          items:
            $ref: '#/components/schemas/Arranger'
        composers:
          type: array
          items:
            $ref: '#/components/schemas/Composer'
        lyricists:
          type: array
          items:
            $ref: '#/components/schemas/Lyricist'
      examples:
        - songId: 3cd42c09-ff3c-4cd2-913f-a279c4ea89b4
          title: 描き続けた君へ
          description: オリジナル楽曲
          songType:
            name: オリジナル曲
            value: 1
          orderNo: 1
          arrangers:
            - creatorId: a4d01e9d-e593-4bd9-ba83-e9a7dd3887cd
              creatorName: ヰ世界情緒
              orderNo: 1
          composers:
            - creatorId: a4d01e9d-e593-4bd9-ba83-e9a7dd3887cd
              creatorName: ヰ世界情緒
              orderNo: 1
          lyricists:
            - creatorId: a4d01e9d-e593-4bd9-ba83-e9a7dd3887cd
              creatorName: ヰ世界情緒
              orderNo: 1
    SongCreateRequest:
      type: object
      required:
        - title
        - description
        - songTypeValue
        - arrangers
        - composers
        - lyricists
      properties:
        title:
          $ref: '#/components/schemas/title'
        description:
          $ref: '#/components/schemas/description'
        songTypeValue:
          $ref: '#/components/schemas/SongTypeValue'
        arrangers:
          type: array
          items:
            $ref: '#/components/schemas/RequestArranger'
        composers:
          type: array
          items:
            $ref: '#/components/schemas/RequestComposer'
        lyricists:
          type: array
          items:
            $ref: '#/components/schemas/RequestLyricist'
    SongCreateResponse:
      type: object
      required:
        - song
      properties:
        song:
          $ref: '#/components/schemas/Song'
    SongCreator:
      type: object
      required:
        - creatorId
        - creatorName
        - orderNo
      properties:
        creatorId:
          $ref: '#/components/schemas/creatorId'
        creatorName:
          $ref: '#/components/schemas/creatorName'
        orderNo:
          $ref: '#/components/schemas/orderNo'
    SongGetResponse:
      type: object
      required:
        - song
      properties:
        song:
          $ref: '#/components/schemas/Song'
    SongListResponse:
      type: object
      required:
        - songs
      properties:
        songs:
          type: array
          items:
            $ref: '#/components/schemas/Song'
    SongType:
      type: object
      required:
        - name
        - value
      properties:
        name:
          $ref: '#/components/schemas/songTypeName'
        value:
          $ref: '#/components/schemas/SongTypeValue'
      examples:
        - name: オリジナル曲
          value: 1
    SongTypeListResponse:
      type: object
      required:
        - songTypes
      properties:
        songTypes:
          type: array
          items:
            $ref: '#/components/schemas/SongType'
    SongTypeValue:
      type: number
      enum:
        - 1
        - 2
        - 3
        - 4
        - 5
        - 6
      description: 楽曲種別の値
    SongUpdateRequest:
      type: object
      required:
        - title
        - description
        - songTypeValue
        - orderNo
        - arrangers
        - composers
        - lyricists
      properties:
        title:
          $ref: '#/components/schemas/title'
        description:
          $ref: '#/components/schemas/description'
        songTypeValue:
          $ref: '#/components/schemas/SongTypeValue'
        orderNo:
          $ref: '#/components/schemas/orderNo'
        arrangers:
          type: array
          items:
            $ref: '#/components/schemas/RequestArranger'
        composers:
          type: array
          items:
            $ref: '#/components/schemas/RequestComposer'
        lyricists:
          type: array
          items:
            $ref: '#/components/schemas/RequestLyricist'
    SongUpdateResponse:
      type: object
      required:
        - song
      properties:
        song:
          $ref: '#/components/schemas/Song'
    ValidationError:
      type: object
      required:
        - field
        - message
      properties:
        field:
          type: string
        message:
          type: string
    creatorId:
      type: string
      format: uuid
      description: クリエイターID
    creatorName:
      type: string
      minLength: 1
      description: クリエイター名
    description:
      type: string
      minLength: 1
      description: 楽曲の説明
    email:
      type: string
      format: email
      description: メールアドレス
    orderNo:
      type: integer
      format: int32
      minimum: 1
      description: 表示順
    performerId:
      type: string
      format: uuid
      description: 共演者ID
    performerName:
      type: string
      minLength: 1
      description: 共演者名
    songId:
      type: string
      format: uuid
      description: 楽曲ID
    songTypeName:
      type: string
      minLength: 1
      description: 楽曲種別名
    title:
      type: string
      minLength: 1
      description: 楽曲名
    uuid:
      type: string
      format: uuid
      description: UUID v4
  securitySchemes:
    CookieAuth:
      type: apiKey
      in: cookie
      name: access_token
servers:
  - url: https://local.admin.terrarium.isekaijoucho.fan/api
    description: ローカル環境
    variables: {}
